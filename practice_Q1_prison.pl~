%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                         %
%         276 Introduction to Prolog                      %
%                                                         %
%         Practice Lexis Test                             %
%                                                         %
%         Question 1 (prison)                             %
%                                                         %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                         %
%         Question 1 (prison)                             %
%                                                         %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% compile the Prison Database

:- ensure_loaded(prisonDB_lexis).



cell(N) :-
   cells(Cells),
   in_range(1,Cells,N).

in_range(Min, Max, Min) :-
	Min =< Max.
in_range(Min, Max, N) :-
	Min < Max, 
	NextMin is Min + 1,
	in_range(NextMin, Max, N).
	
empty_cell(Cell) :-
	cell(Cell),
	\+ prisoner(_,_,Cell,_,_,_).

all_female_cell(Cell) :-
	cell(Cell),
	\+ empty_cell(Cell),
	forall(prisoner(_,FirstName, Cell, _,_,_), female_name(FirstName)).

forall(C1,C2) :- \+ (C1, \+ C2).

female_prisoners(N) :-
	findall(F, female_name(F), Females),
	length(Females, N).

cell_occupancy(Cell, N) :-
	cell(Cell),
	findall((S,F), prisoner(S,F,Cell,_,_,_), Prisoners),
	length(Prisoners, N).

fullest_cell(Cell) :-
	cell_occupancy(Cell, NumOccupants),
	is_fullest(NumOccupants).
is_fullest(NumOccupants) :-
	\+ (cell_occupancy(_, N), N > NumOccupants).	

psychos(S,F,Crime,Time) :-
	psychopath(S,F),
	prisoner(S,F,_,Crime,Time,_).
	
worst_psychopath(S,F,Crime,Time) :-
	psychos(S,F,Crime,Time),
	\+ (psychos(_,_,_,T), T > Time).

criminals(Crime, N) :-
	crimes(Crime),
	member(Crime, Crimes),
	findall((S,F), prisoner(S,F,_,Crime,_,_), Criminals),
	length(Criminals,N).

/*  Remove the following comments if you wish to skip part(a) */

/* 

% load the library(between) module

:- use_module(library(between)).

in_range(Min, Max, N) :- between(Min, Max, N).

*/

%% ------ Add your code to this file here.

